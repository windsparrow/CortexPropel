# 🌳 任务可视化调试工具

这是一个轻量级的可视化工具，用于调试和验证任务管理系统的数据正确性。

## 🚀 快速启动

```bash
cd visualization
./start.sh
```

或者手动启动：
```bash
cd visualization
pip install -r requirements.txt
python server.py
```

然后访问: http://localhost:8000

## 📊 功能说明

### 上半部分：任务树可视化
- **数据源**: `data/task_tree.json`
- **展示内容**: 任务层级结构、状态、ID
- **交互功能**: 
  - 点击节点在右侧表格中高亮对应任务
  - 鼠标悬停显示任务详细信息
  - 支持缩放和拖拽

### 下半部分：任务详情表格
- **数据源**: 数据库中的任务表
- **展示内容**: 任务的完整元数据
- **状态标识**:
  - 🟡 `pending`: 待处理
  - 🔵 `in-progress`: 进行中  
  - 🟢 `completed`: 已完成
  - 🔴 `failed`: 失败

### 数据一致性检查
- 自动对比JSON文件和数据库中的任务
- 标识出只在JSON中或只在数据库中的任务
- 计算数据一致性分数

## 🎯 使用场景

1. **验证任务录入**: 检查通过命令行添加的任务是否正确保存
2. **调试数据结构**: 查看任务树的层级关系是否正确
3. **数据一致性检查**: 发现JSON和数据库之间的差异
4. **任务状态监控**: 快速了解所有任务的整体状态

## 🔧 API 端点

- `GET /` - 主页面
- `GET /api/tree` - 获取任务树数据
- `GET /api/tasks` - 获取所有任务列表
- `GET /api/validate` - 数据一致性验证
- `GET /api/task/{id}` - 获取特定任务详情

## 📋 示例测试

添加一些示例任务进行测试：
```bash
python add_sample_tasks.py
```

## 🎨 界面特色

- **响应式设计**: 适配不同屏幕尺寸
- **颜色编码**: 不同状态用不同颜色标识
- **实时交互**: 树形图和表格双向联动
- **数据验证**: 自动检测数据不一致问题
- **轻量级**: 纯前端实现，无需复杂配置

## 🔍 故障排查

如果页面无法加载：
1. 检查服务器是否启动: `curl http://localhost:8000/api/tree`
2. 检查数据文件是否存在: `ls -la data/task_tree.json`
3. 检查数据库是否有数据: `curl http://localhost:8000/api/tasks`

## 📝 注意事项

- 这是一个**只读**调试工具，不会修改任何数据
- 所有数据操作请继续使用命令行工具
- 适合开发阶段验证数据正确性使用